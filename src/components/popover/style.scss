/**
 * Gutenberg v6.2
 */
@import "../../common/style";

$arrow-size: 8px;

.gutenberg-utils-dropdown {
	&.components-popover:not(.components-tooltip) {
		position: fixed;
		z-index: 1000000;
		left: 50%;

		&:not(.no-animation) {
			opacity: 0;
		}

		&.is-mobile,
		&[data-x-axis][data-y-axis],
		&.is-top.components-animate__appear,
		&.is-bottom.components-animate__appear,
		&.is-middle.components-animate__appear,
		&.is-right.components-animate__appear,
		&.is-left.components-animate__appear,
		&.is-center.components-animate__appear {
			opacity: 1;
		}

		&.is-mobile {
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}

		&:not(.is-without-arrow):not(.is-mobile) {
			margin-left: 2px;

			&::before {
				border: $arrow-size solid $light-gray-500;
			}

			&::after {
				border: $arrow-size solid $white;
			}

			&::before,
			&::after {
				content: "";
				position: absolute;
				height: 0;
				width: 0;
				line-height: 0;
			}

			&.is-top,
			&[data-y-axis="top"] {
				margin-top: - $arrow-size;

				&::before {
					bottom: - $arrow-size;
				}

				&::after {
					bottom: -6px;
				}

				&::before,
				&::after {
					border-bottom: none;
					border-left-color: transparent;
					border-right-color: transparent;
					border-top-style: solid;
					margin-left: -10px;
				}
			}

			&.is-bottom,
			&[data-y-axis="bottom"] {
				margin-top: $arrow-size;

				&::before {
					top: -$arrow-size;
				}

				&::after {
					top: -6px;
				}

				&::before,
				&::after {
					border-bottom-style: solid;
					border-left-color: transparent;
					border-right-color: transparent;
					border-top: none;
					margin-left: -10px;
				}
			}

			&.is-middle.is-left,
			&[data-y-axis="middle"][data-x-axis="left"] {
				margin-left: -$arrow-size;

				&::before {
					right: -$arrow-size;
				}

				&::after {
					right: -6px;
				}

				&::before,
				&::after {
					border-bottom-color: transparent;
					border-left-style: solid;
					border-right: none;
					border-top-color: transparent;
				}
			}

			&.is-middle.is-right,
			&[data-y-axis="middle"][data-x-axis="right"] {
				margin-left: $arrow-size;

				&::before {
					left: -$arrow-size;
				}

				&::after {
					left: -6px;
				}

				&::before,
				&::after {
					border-bottom-color: transparent;
					border-left: none;
					border-right-style: solid;
					border-top-color: transparent;
				}
			}
		}

		&:not(.is-mobile) {
			&.is-top,
			&[data-y-axis="top"] {
				bottom: 100%;
			}

			&.is-bottom,
			&[data-y-axis="bottom"] {
				top: 100%;
				z-index: 99990;
			}

			&.is-middle,
			&[data-y-axis="middle"] {
				align-items: center;
				display: flex;
			}
		}

		&.is-mobile .components-popover__content {
			height: calc(100% - #{ $panel-header-height });
			border-top: 0;
		}

		&:not(.is-mobile) .components-popover__content {
			position: absolute;
			height: auto;
			overflow-y: auto;
			min-width: 260px;
		}

		&:not(.is-mobile).is-top .components-popover__content,
		&:not(.is-mobile)[data-y-axis="top"] .components-popover__content {
			bottom: 100%;
		}

		&:not(.is-mobile).is-center .components-popover__content,
		&:not(.is-mobile)[data-x-axis="center"] .components-popover__content {
			left: 50%;
			transform: translateX(-50%);
		}

		&:not(.is-mobile).is-right .components-popover__content,
		&:not(.is-mobile)[data-x-axis="right"] .components-popover__content {
			position: absolute;
			left: 100%;
		}

		&:not(.is-mobile):not(.is-middle).is-right .components-popover__content,
		&:not(.is-mobile):not(.is-middle)[data-x-axis="right"] .components-popover__content {
			margin-left: -24px;
		}

		&:not(.is-mobile).is-left .components-popover__content,
		&:not(.is-mobile)[data-x-axis="left"] .components-popover__content {
			position: absolute;
			right: 100%;
		}

		&:not(.is-mobile):not(.is-middle).is-left .components-popover__content,
		&:not(.is-mobile):not(.is-middle)[data-x-axis="left"] .components-popover__content {
			margin-right: -24px;
		}
	}

	.components-popover__content {
		box-shadow: $shadow-popover;
		border: $border-width solid $light-gray-500;
		background: $white;
		height: 100%;
	}

	// The withFocusReturn div
	.components-popover__content > div {
		height: 100%;
	}

	.components-popover__header {
		align-items: center;
		background: $white;
		border: $border-width solid $light-gray-500;
		display: flex;
		height: $panel-header-height;
		justify-content: space-between;
		padding: 0 8px 0 $panel-padding;
	}

	.components-popover__header-title {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		width: 100%;
	}

	.components-popover__close.components-icon-button {
		z-index: 5;
	}
}
